if(!nexacro.MPFileDialog){nexacro.MPFileDialog_Style=function(_a){nexacro.Style.call(this);if(_a){this._target=_a;}};var _pMPFileDialogStyle=nexacro._createPrototype(nexacro.Style,nexacro.MPFileDialog_Style);nexacro.MPFileDialog_Style.prototype=_pMPFileDialogStyle;_pMPFileDialogStyle.__custom_emptyObject=function(){};_pMPFileDialogStyle.__get_custom_style_value=function(){};nexacro.MPFileDialog_CurrentStyle=function(){nexacro.CurrentStyle.call(this);};var _pMPFileDialogCurrentStyle=nexacro._createPrototype(nexacro.CurrentStyle,nexacro.MPFileDialog_CurrentStyle);nexacro.MPFileDialog_CurrentStyle.prototype=_pMPFileDialogCurrentStyle;_pMPFileDialogCurrentStyle.__custom_emptyObject=_pMPFileDialogStyle.__custom_emptyObject;_pMPFileDialogCurrentStyle.__get_custom_style_value=_pMPFileDialogStyle.__get_custom_style_value;delete _pMPFileDialogStyle;delete _pMPFileDialogCurrentStyle;nexacro.MPFileDialog=function(_a,_b,_c,_d,_e,_f,_g,_h,_i){nexacro.Component.call(this,_a,_b,_c,_d,_e,_f,_g,_h,_i);this.FileNameList=null;this.defaultextension=false;this.FileName=null;this.Filter="All(*.*)|*.*|Text File(*.txt)|*.txt|";this.FilePath=null;this.MultiSelect=false;this.FilterIndex=0;this.Type="Open";this._FileDialog_elem=null;this.openMode=null;this._event_list={"onclose":1};this.onclose=null;};var _pMPFileDialog=nexacro._createPrototype(nexacro.Component,nexacro.MPFileDialog);nexacro.MPFileDialog.prototype=_pMPFileDialog;_pMPFileDialog._type_name="MPFileDialog";_pMPFileDialog.on_create_contents=function(){this._FileDialog_elem=new nexacro.FileDialog("_FileDialog_",this);};_pMPFileDialog.on_created_contents=function(){this._FileDialog_elem.set_async(false);this._FileDialog_elem.setEventHandler("onclose",this._onclose,this);this.setProp();};_pMPFileDialog.on_destroy_contents=function(){var _a=this._FileDialog_elem;if(_a){_a.destroy();this._FileDialog_elem=null;}_a=null;};_pMPFileDialog.set_defaultextension=function(_a){if(_a!=this.defaultextension){this.defaultextension=_a;this.on_apply_defaultextension();}};_pMPFileDialog.on_apply_defaultextension=function(){if(this._FileDialog_elem){this._FileDialog_elem.set_defaultextension(this.defaultextension);}};_pMPFileDialog.set_FilterIndex=function(_a){if(_a!=this.FilterIndex){this.FilterIndex=_a;this.on_apply_FilterIndex();}};_pMPFileDialog.on_apply_FilterIndex=function(){if(this._FileDialog_elem){this._FileDialog_elem.set_filterindex(this.FilterIndex);}};_pMPFileDialog.set_Filter=function(_a){if(_a!=this.Filter){this.Filter=_a;this.on_apply_Filter();}};_pMPFileDialog.on_apply_Filter=function(){if(this._FileDialog_elem){this._FileDialog_elem.set_filter(this.Filter);}};_pMPFileDialog.set_MultiSelect=function(_a){_a=nexacro._toBoolean(_a);if(_a!=this.MultiSelect){this.MultiSelect=_a;}};_pMPFileDialog.set_FilePath=function(_a){if(_a!=this.FilePath){this.FilePath=_a;}};_pMPFileDialog.set_FileName=function(_a){if(_a!=this.FileName){this.FileName=_a;}};_pMPFileDialog.set_FileNameList=function(_a){if(_a!=this.FileNameList){this.FileNameList=_a;}};_pMPFileDialog.set_Type=function(_a){if(_a!=this.Type){this.Type=_a;}};_pMPFileDialog.setProp=function(){this.on_apply_FilterIndex();this.on_apply_Filter();this.on_apply_defaultextension();};_pMPFileDialog.isNull=function(_a){if(_a==null||_a=="null"||_a==undefined){return true;}var _b=new String(_a);if(_b.length==0){return true;}return false;};_pMPFileDialog.open=function(_a,_b,_c,_d){return this._FileDialog_elem.open(_a,_b,_c,_d);};_pMPFileDialog.Open=function(_a,_b){this.openMode=nexacro.FileDialog.LOAD;var _c="FileOpen";switch(this.Type.toUpperCase()){case "DIR":this.openMode=nexacro.FileDialog.SELFOLDER;_c="select Folder";break;case "SAVE":this.openMode=nexacro.FileDialog.SAVE;_c="FileSave";break;case "OPEN":default:if(this.MultiSelect==true){this.openMode=nexacro.FileDialog.MULTILOAD;}break;}this.setProp();if(_b!=false&&!this.isNull(_a)){return this._FileDialog_elem.open(_c,this.openMode,_a);}else{return this._FileDialog_elem.open(_c,this.openMode);}};_pMPFileDialog._onclose=function(_a,_b){if(_b.reason!=0){var _c=_b.virtualfiles;switch(this.openMode){case nexacro.FileDialog.SELFOLDER:this.FilePath=_b.path;break;case nexacro.FileDialog.SAVE:this.FileName=_c[0].filename;this.FilePath=_c[0].path;break;case nexacro.FileDialog.LOAD:default:if(this.MultiSelect==true){this.FileNameList=[];for(var _d=0;_d<_c.length;_d++ ){if(_d==0){this.FilePath=_c[_d].path;}this.FileNameList[_d]=_c[_d].filename;}}else{this.FileName=_c[0].filename;this.FilePath=_c[0].path;}break;}delete _c;}if(this.onclose&&this.onclose._has_handlers){this.onclose._fireEvent(this.parent,_b);}};delete _pMPFileDialog;}