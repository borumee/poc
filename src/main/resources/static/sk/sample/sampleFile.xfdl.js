(function(){return function(){if(!this._is_form){return;}var _a=null;this.on_create=function(){this.set_name("sampleFile");this.set_titletext("파일 up/download");if(Form==this.constructor){this._setFormPosition(1050,736);}_a=new Dataset("dsList",this);_a._setContents("<ColumnInfo><Column id=\"ATTC_FILE_NM\" type=\"STRING\" size=\"256\"/><Column id=\"SERV_ATTC_FILE_NM\" type=\"STRING\" size=\"256\"/><Column id=\"ATTC_FILE_SIZE\" type=\"STRING\" size=\"256\"/><Column id=\"ATTC_FILE_TYPE\" type=\"STRING\" size=\"256\"/><Column id=\"ATTC_FILE_PATH\" type=\"STRING\" size=\"256\"/><Column id=\"ATTC_FILE_IDX\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("dsUpload",this);_a._setContents("<ColumnInfo><Column id=\"FileName\" type=\"STRING\" size=\"256\"/><Column id=\"Path\" type=\"STRING\" size=\"256\"/><Column id=\"FileSize\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Dataset("dsTest",this);_a._setContents("<ColumnInfo><Column id=\"Column0\" type=\"STRING\" size=\"256\"/><Column id=\"Column1\" type=\"STRING\" size=\"256\"/><Column id=\"Column2\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"Column0\">11</Col><Col id=\"Column1\">AA</Col><Col id=\"Column2\">가나다</Col></Row><Row><Col id=\"Column0\">22</Col><Col id=\"Column1\">BB</Col><Col id=\"Column2\">가A나B</Col></Row></Rows>");this.addChild(_a.name,_a);_a=new FileDownTransfer("fdtFile",this);_a.set_url("svcUrl::fileDownload.do");this.addChild(_a.name,_a);_a=new FileUpTransfer("futFile",this);this.addChild(_a.name,_a);_a=new FileDialog("fdgFile",this);this.addChild(_a.name,_a);_a=new Div("divSearch","0","0",null,"54","20",null,null,null,null,null,this);_a.set_taborder("0");_a.set_cssclass("div_WF_Search");_a.set_text("");_a.set_visible("true");this.addChild(_a.name,_a);_a=new Combo("Combo01","56","-158","185","28",null,null,null,null,null,null,this.divSearch.form);_a.set_taborder("0");_a.set_codecolumn("codecolumn");_a.set_datacolumn("datacolumn");_a.set_readonly("false");var _b=new nexacro.NormalDataset("divSearch_form_Combo01_innerdataset",_a);_b._setContents("<ColumnInfo><Column id=\"codecolumn\" size=\"256\"/><Column id=\"datacolumn\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"codecolumn\">1</Col><Col id=\"datacolumn\">전체</Col></Row><Row><Col id=\"codecolumn\">2</Col><Col id=\"datacolumn\">사용</Col></Row><Row><Col id=\"codecolumn\">3</Col><Col id=\"datacolumn\">미사용</Col></Row></Rows>");_a.set_innerdataset(_b);_a.set_text("전체");_a.set_value("1");_a.set_index("0");this.divSearch.addChild(_a.name,_a);_a=new Combo("Combo02","282","-158","185","28",null,null,null,null,null,null,this.divSearch.form);_a.set_taborder("1");_a.set_codecolumn("codecolumn");_a.set_datacolumn("datacolumn");_a.set_readonly("false");var _c=new nexacro.NormalDataset("divSearch_form_Combo02_innerdataset",_a);_c._setContents("<ColumnInfo><Column id=\"codecolumn\" size=\"256\"/><Column id=\"datacolumn\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"codecolumn\">1</Col><Col id=\"datacolumn\">전체</Col></Row><Row><Col id=\"codecolumn\">2</Col><Col id=\"datacolumn\">사용</Col></Row><Row><Col id=\"codecolumn\">3</Col><Col id=\"datacolumn\">미사용</Col></Row></Rows>");_a.set_innerdataset(_c);_a.set_text("전체");_a.set_value("1");_a.set_index("0");this.divSearch.addChild(_a.name,_a);_a=new Combo("Combo03","521","-158","184","28",null,null,null,null,null,null,this.divSearch.form);_a.set_taborder("2");_a.set_codecolumn("codecolumn");_a.set_datacolumn("datacolumn");_a.set_readonly("false");var _d=new nexacro.NormalDataset("divSearch_form_Combo03_innerdataset",_a);_d._setContents("<ColumnInfo><Column id=\"codecolumn\" size=\"256\"/><Column id=\"datacolumn\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"codecolumn\">1</Col><Col id=\"datacolumn\">전체</Col></Row><Row><Col id=\"codecolumn\">2</Col><Col id=\"datacolumn\">사용</Col></Row><Row><Col id=\"codecolumn\">3</Col><Col id=\"datacolumn\">미사용</Col></Row></Rows>");_a.set_innerdataset(_d);_a.set_text("전체");_a.set_value("1");_a.set_index("0");this.divSearch.addChild(_a.name,_a);_a=new Calendar("Calendar00","785","-158","184","28",null,null,null,null,null,null,this.divSearch.form);_a.set_taborder("3");_a.set_value("20190308");_a.set_dateformat("yyyy-MM-dd ddd");_a.set_readonly("false");this.divSearch.addChild(_a.name,_a);_a=new Button("btnSearch",null,"12","48","28","25",null,null,null,null,null,this.divSearch.form);_a.set_taborder("4");_a.set_text("조회");_a.set_cssclass("btn_WF_Search");_a.set_visible("true");this.divSearch.addChild(_a.name,_a);_a=new Static("staSearchTitle00","0","12","86","28",null,null,null,null,null,null,this.divSearch.form);_a.set_taborder("5");_a.set_text("파일명");_a.set_cssclass("sta_WF_SchLabel");_a.set_fittocontents("width");_a.set_visible("false");this.divSearch.addChild(_a.name,_a);_a=new Edit("Edit00_00","staSearchTitle00:0","12","140","28",null,null,null,null,null,null,this.divSearch.form);_a.set_taborder("6");_a.set_visible("false");this.divSearch.addChild(_a.name,_a);_a=new Static("Static04_00",null,"0","20",null,"0","20",null,null,null,null,this);_a.set_taborder("1");_a.set_cssclass("sta_WF_GSize");_a.set_visible("false");_a.set_text("W20");this.addChild(_a.name,_a);_a=new Static("staTitle","0","divSearch:0","342","43",null,null,null,null,null,null,this);_a.set_taborder("2");_a.set_text("파일리스트");_a.set_cssclass("sta_WF_Title");this.addChild(_a.name,_a);_a=new Grid("grdList","0","staTitle:0","38.91%",null,null,"0",null,null,null,null,this);_a.set_taborder("5");_a.set_binddataset("dsList");_a.set_autofittype("col");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"48\"/><Column size=\"400\"/><Column size=\"80\"/></Columns><Rows><Row size=\"37\" band=\"head\"/><Row size=\"37\"/></Rows><Band id=\"head\"><Cell text=\"IDX\"/><Cell col=\"1\" text=\"파일명\"/><Cell col=\"2\" text=\"파일 사이즈\"/></Band><Band id=\"body\"><Cell text=\"bind:ATTC_FILE_IDX\" textAlign=\"center\"/><Cell col=\"1\" text=\"bind:ATTC_FILE_NM\"/><Cell col=\"2\" text=\"bind:ATTC_FILE_SIZE\" displaytype=\"number\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Static("staTitle00","grdList:30","divSearch:0",null,"43","20",null,null,null,null,null,this);_a.set_taborder("6");_a.set_text("파일업로드");_a.set_cssclass("sta_WF_Title");this.addChild(_a.name,_a);_a=new Grid("grdUpload","grdList:30","staTitle00:0",null,null,"20","0",null,null,null,null,this);_a.set_taborder("7");_a.set_binddataset("dsUpload");_a.set_autofittype("col");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"300\"/><Column size=\"48\"/></Columns><Rows><Row size=\"37\" band=\"head\"/><Row size=\"37\"/></Rows><Band id=\"head\"><Cell text=\"FileName\"/><Cell col=\"1\"/></Band><Band id=\"body\"><Cell text=\"bind:FileName\"/><Cell col=\"1\" displaytype=\"buttoncontrol\" edittype=\"button\" text=\"삭제\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Static("staHelpMessage","grdList:50","staTitle00:58",null,null,"40","20",null,null,null,null,this);_a.set_taborder("8");_a.set_text("마우스로 파일을 끌어오세요");_a.set_visible("true");_a.set_cssclass("sta_WF_Mes");this.addChild(_a.name,_a);_a=new Button("btnFileSave",null,"62","95","28","20",null,null,null,null,null,this);_a.set_taborder("3");_a.set_text("파일저장");_a.set_fittocontents("width");_a.set_cssclass("btn_WF_ExcelUp");this.addChild(_a.name,_a);_a=new Button("btnFileSelect",null,"62","74","28","btnFileSave:5",null,null,null,null,null,this);_a.set_taborder("4");_a.set_text("파일선택");_a.set_visible("true");this.addChild(_a.name,_a);_a=new Layout("default","",0,0,this.divSearch.form,function(_e){});this.divSearch.form.addLayout(_a.name,_a);_a=new Layout("default","",1050,736,this,function(_e){});_a.set_mobileorientation("landscape");this.addLayout(_a.name,_a);_a=new BindItem("item0","divSearch.form.Edit00_00","value","dsSearch","srchCond1");this.addChild(_a.name,_a);_a.bind();};this.loadPreloadList=function(){};this.registerScript("sampleFile.xfdl",function(){this.form_onload=function(_a,_b){this.gfnFormOnload(_a,_b);};this.cfnSearch=function(){this.fnSearch();};this.cfnRefresh=function(){};this.fnSearch=function(){var _b="searchFileList";var _c="searchFileList.do";var _d="inDs=dsSearch";var _e="dsList=outDs";var _f="";this.gfnTransaction(_b,_c,_d,_e,_f);};this.fnCallback=function(_b,_c,_d){switch(_b){case "searchFileList":this.fnInit();break;default:break;}};this.fnMsgCallback=function(_b,_c){};this.fnFileDialogCallback=function(_b,_c,_d){};this.fnInit=function(){this.dsUpload.clearData();this.futFile.clearFileList();this.staHelpMessage.set_visible(true);};this.fnFileDownload=function(_b){this.fdtFile.setPostData("filePath",this.dsList.getColumn(_b,"ATTC_FILE_PATH"));this.fdtFile.setPostData("saveFileName",this.dsList.getColumn(_b,"SERV_ATTC_FILE_NM"));this.fdtFile.setPostData("orgFileName",this.dsList.getColumn(_b,"ATTC_FILE_NM"));this.fdtFile.set_downloadfilename(this.dsList.getColumn(_b,"ATTC_FILE_NM"));this.fdtFile.download("svcUrl::fileDownload.do");};this.fnFileDialogOpen=function(){this.fdgFile.open("file upload..",FileDialog.MULTILOAD);};this.fnFileUploadTran=function(){var _b=[];_b.push(this.dsList);_b.push(this.dsTest);var _c=this.fnSerializeXML(_b);_c=encodeURIComponent(_c);this.futFile.setPostData("infoDatasets",_c);this.futFile.upload("svcUrl::fileUpload.do");};this.fnSetFile=function(_b){for(var _d=0;_d<_b.length;_d++ ){this.futFile.addFile("VFile"+_d,_b[_d]);var _c=this.dsUpload.addRow();this.dsUpload.setColumn(_c,"FileName",_b[_d].filename);this.dsUpload.setColumn(_c,"Path",_b[_d].fullpath);this.dsUpload.setColumn(_c,"FileSize",_b[_d].getFileSize());}};this.fnSerializeXML=function(_b){var _c=0;var _d=[];if(system.navigatorname!="nexacro"){this.fnWriteData(_d,"<?xml version=\"1.0\" encoding=\"UTF-8\"?>",_c);this.fnWriteData(_d,"<Root xmlns=\"http://www.nexacroplatform.com/platform/dataset\">",_c++ );for(var _f=0;_f<_b.length;_f++ ){_d.push(_b[_f].saveXML(_b.name,"normal",_c,false));}this.fnWriteData(_d,"</Root>", --_c);var _e=_d.join("\n");}else{this.fnWriteData(_d,"<?xml version=\"1.0\" encoding=\"UTF-8\"?>",_c);this.fnWriteData(_d,"<Root xmlns=\"http://www.nexacroplatform.com/platform/dataset\">",_c++ );for(var _f=0;_f<_b.length;_f++ ){_d.push(_b[_f].saveXML(_b.name,"normal",_c,false));}this.fnWriteData(_d,"</Root>", --_c);var _e=_d.join("\n");}return _e;};this._TABS=["","\t","\t\t","\t\t\t","\t\t\t\t","\t\t\t\t\t","\t\t\t\t\t\t"];this.fnWriteData=function(_b,_c,_d){_b[_b.length]=this._TABS[_d]+_c;};this.fnSerializeSSV=function(_b){var _c=String.fromCharCode(30);var _d=String.fromCharCode(31);var _e=[];_e.push("SSV:utf-8"+_c);for(var _g=0;_g<_b.length;_g++ ){_e.push(_b[_g].saveSSV(_b[_g].name,"normal"));}var _f=_e.join("");return _f;};this.grdList_oncelldblclick=function(_a,_b){this.fnFileDownload(_b.row);};this.fdtFile_onerror=function(_a,_b){trace(_b.errormsg+"}}"+"fdtFile_onerror : "+_b.requesturi+"__"+_b.locationuri);};this.fdtFile_onsuccess=function(_a,_b){trace("fdtFile_onsuccess : "+_b.targetfullpath);};this.divSearch_btnSearch_onclick=function(_a,_b){this.cfnSearch();};this.btnFileupload_onclick=function(_a,_b){this.fnFileDialogOpen();};this.btnFileSave_onclick=function(_a,_b){this.fnFileUploadTran();};this.fdgFile_onclose=function(_a,_b){if(_b.reason==3){this.fnSetFile(_b.virtualfiles);}};this.grdUpload_oncellclick=function(_a,_b){if(_b.col==1){this.futFile.removeFile("VFile"+_b.row);this.dsUpload.deleteRow(this.dsUpload.rowposition);}};this.futFile_onsuccess=function(_a,_b){this.futFile.clearFileList();this.dsUpload.clearData();this.cfnSearch();};this.futFile_onerror=function(_a,_b){this.gfnAlert("msg.server.error.msg",[_b.errormsg]);};this.grdUpload_ondrop=function(_a,_b){if(!this.gfnIsNull(_b.filelist)){this.fnSetFile(_b.filelist);}};this.grdUpload_ondragenter=function(_a,_b){this.staHelpMessage.set_visible(false);};this.grdUpload_ondragleave=function(_a,_b){if(!this.staHelpMessage.visible&&this.dsUpload.getRowCount()==0){this.staHelpMessage.set_visible(true);}else{this.staHelpMessage.set_visible(false);}};this.dsUpload_onrowsetchanged=function(_a,_b){if(_a.rowcount>0){this.staHelpMessage.set_visible(false);}else{this.staHelpMessage.set_visible(true);}};});this.on_initEvent=function(){this.addEventHandler("onload",this.form_onload,this);this.divSearch.form.btnSearch.addEventHandler("onclick",this.divSearch_btnSearch_onclick,this);this.grdList.addEventHandler("oncelldblclick",this.grdList_oncelldblclick,this);this.grdUpload.addEventHandler("oncellclick",this.grdUpload_oncellclick,this);this.grdUpload.addEventHandler("ondrop",this.grdUpload_ondrop,this);this.grdUpload.addEventHandler("ondragenter",this.grdUpload_ondragenter,this);this.grdUpload.addEventHandler("ondragleave",this.grdUpload_ondragleave,this);this.staHelpMessage.addEventHandler("onmouseenter",this.staHelpMessage_onmouseenter,this);this.btnFileSave.addEventHandler("onclick",this.btnFileSave_onclick,this);this.btnFileSelect.addEventHandler("onclick",this.btnFileupload_onclick,this);this.fdtFile.addEventHandler("onerror",this.fdtFile_onerror,this);this.fdtFile.addEventHandler("onsuccess",this.fdtFile_onsuccess,this);this.futFile.addEventHandler("onsuccess",this.futFile_onsuccess,this);this.futFile.addEventHandler("onerror",this.futFile_onerror,this);this.fdgFile.addEventHandler("onclose",this.fdgFile_onclose,this);this.dsUpload.addEventHandler("onrowsetchanged",this.dsUpload_onrowsetchanged,this);};this.loadIncludeScript("sampleFile.xfdl");this.loadPreloadList();_a=null;};})();