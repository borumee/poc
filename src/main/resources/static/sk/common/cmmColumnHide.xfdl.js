(function(){return function(){if(!this._is_form){return;}var _a=null;this.on_create=function(){this.set_name("cmmColumnHide");this.set_titletext("그리드 컬럼숨김");if(Form==this.constructor){this._setFormPosition(700,415);}_a=new Dataset("dsColumn",this);_a._setContents("<ColumnInfo><Column id=\"columnText\" type=\"STRING\" size=\"256\"/><Column id=\"chk\" type=\"STRING\" size=\"256\"/><Column id=\"columnIndex\" type=\"STRING\" size=\"256\"/><Column id=\"body\" type=\"STRING\" size=\"256\"/><Column id=\"orgSize\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Grid("grdList","25","20",null,null,"25","52",null,null,null,null,this);_a.set_taborder("0");_a.set_binddataset("dsColumn");_a.set_autofittype("col");_a.getSetter("griduserproperty").set("!sort,!rowfix,!colfix,!filter,!initial");_a.set_autoenter("select");_a._setContents("<Formats><Format id=\"default\"><Columns><Column size=\"40\" band=\"left\"/><Column size=\"225\"/></Columns><Rows><Row size=\"37\" band=\"head\"/><Row size=\"37\"/></Rows><Band id=\"head\"><Cell displaytype=\"checkboxcontrol\" edittype=\"checkbox\" checkboxfalsevalue=\"0\" checkboxtruevalue=\"1\"/><Cell col=\"1\" text=\"컬럼선택\" expandchar=\"popup.columnselect\"/></Band><Band id=\"body\"><Cell displaytype=\"checkboxcontrol\" edittype=\"checkbox\" text=\"bind:chk\" checkboxfalsevalue=\"0\" checkboxtruevalue=\"1\"/><Cell col=\"1\" text=\"bind:columnText\"/></Band></Format></Formats>");this.addChild(_a.name,_a);_a=new Grid("grdOrg","710","18","339","344",null,null,null,null,null,null,this);_a.set_taborder("1");_a.set_visible("false");_a._setContents("");this.addChild(_a.name,_a);_a=new Button("btnOk","295","373","50","28",null,null,null,null,null,null,this);_a.set_taborder("2");_a.set_text("확인");_a.set_fittocontents("width");this.addChild(_a.name,_a);_a=new Button("btnCancel","355","373","50","28",null,null,null,null,null,null,this);_a.set_taborder("3");_a.set_text("취소");_a.set_fittocontents("width");_a.set_cssclass("btn_WF_Crud");this.addChild(_a.name,_a);_a=new Layout("default","",700,415,this,function(_b){});_a.set_mobileorientation("landscape");this.addLayout(_a.name,_a);};this.loadPreloadList=function(){};this.registerScript("cmmColumnHide.xfdl",function(){this.fvTargetGrid;this.form_onload=function(_a,_b){this.gfnFormOnload(_a,_b);this.fvTargetGrid=this.getOwnerFrame().pvGrid;if(this.gfnIsNull(this.fvTargetGrid.orgformat)){this.fvTargetGrid.orgformat=this.fvTargetGrid.getCurFormatString();}this.fnSetOrgGrd();this.fnGetHeadText();};this.fnSetOrgGrd=function(){this.grdOrg.set_enableredraw(false);this.grdOrg.set_formats(this.fvTargetGrid.orgformat);this.grdOrg.set_enableredraw(true);};this.fnGetHeadText=function(){var _b=this.fvTargetGrid;var _c=_b.getFormatColCount();var _d=_b.getCellCount("head");this.grdList.set_enableredraw(false);this.dsColumn.set_enableevent(false);for(var _j=0;_j<_c;_j++ ){var _e="";var _f=1;for(var _k=_d -1;_k>0;_k-- ){var _g=_b.getCellProperty("head",_k,"col");var _h=_b.getCellProperty("head",_k,"row");var _i=_b.getCellProperty("head",_k,"text");if(_g==_j){if(_h==0&&this.gfnIsNull(_i)==false){_e=_i;}else{_e=this.fnGetFullColumnText(_b,_g,_h);}break;}}if(this.gfnIsNull(_e)){_e=this.fnGetFullColumnText(_b,_j,0);}if(_b.getRealColSize(_j)==0){_f=0;}else{_f=1;}if(_e=="순번"||_e=="상태"){continue;}if(_e=="0"&&_b.getCellProperty("Body",_j,"text")=="bind:chk"){continue;}var _h=this.dsColumn.addRow();this.dsColumn.setColumn(_h,"columnIndex",_j);this.dsColumn.setColumn(_h,"columnText",_e);this.dsColumn.setColumn(_h,"chk",_f);}this.dsColumn.set_enableevent(true);this.grdList.set_enableredraw(true);};this.fnGetFullColumnText=function(_a,_b,_c){var _d="";var _e=[];for(var _g=_c;_g>=0;_g-- ){var _f=this.gfnReplaceAll(this.fnGetColumnText(_a,_b,_g),"\n","");if(_e[_e.length-1]!=_f&&this.gfnIsNull(_f)==false){_e.push(_f);}}_e.reverse();_d=_e.join(" > ");return _d;};this.fnGetColumnText=function(_a,_b,_c){var _d="";var _e=_a.getCellCount("head");for(var _i=_e -1;_i>=0;_i-- ){var _f=_a.getCellProperty("head",_i,"col");var _g=_a.getCellProperty("head",_i,"row");var _h=_a.getCellProperty("head",_i,"text");if(_b>=_f&&_c>=_g){_d=_a.getCellProperty("head",_i,"text");break;}}return _d;};this.btnCancel_onclick=function(_a,_b){this.gfnClosePopup();};this.btnOk_onclick=function(_a,_b){if(this.gfnDsIsUpdated(this.dsColumn)==false){this.close();}this.fvTargetGrid.set_enableredraw(false);var _c=this.dsColumn.getRowCount();var _d;var _e;var _f;for(var _g=0;_g<_c;_g++ ){_f=nexacro.toNumber(this.dsColumn.getColumn(_g,"columnIndex"));_e=this.dsColumn.getColumn(_g,"chk");if(_e==1){_d=this.grdOrg.getFormatColSize(_f);}else{_d=0;}this.fvTargetGrid.setFormatColProperty(_f,"size",_d);}this.fvTargetGrid.set_enableredraw(true);this.gfnClosePopup();};});this.on_initEvent=function(){this.addEventHandler("onload",this.form_onload,this);this.grdList.addEventHandler("onheadclick",this.grdList_onheadclick,this);this.btnOk.addEventHandler("onclick",this.btnOk_onclick,this);this.btnCancel.addEventHandler("onclick",this.btnCancel_onclick,this);this.dsColumn.addEventHandler("oncolumnchanged",this.dsFilter_oncolumnchanged,this);};this.loadIncludeScript("cmmColumnHide.xfdl");this.loadPreloadList();_a=null;};})();