(function(){return function(_a){var _b;this.addIncludeScript(_a,"CM_LIB::UTL80U0010.xjs");this.registerScript(_a,function(){this.executeIncludeScript("CM_LIB::UTL80U0010.xjs");this.ctmf_request=function(_c,_d,_e,_f,_g,_h,_i){var _j;this.m2n_create(this,"Dataset","ds_aprv_in");this.m2n_create(this,"Dataset","ds_sub_in");this.m2n_create(this,"Dataset","ds_aprvr");this.m2n_create(this,"Dataset","ds_aprv_typ");this.m2n_create(this,"Dataset","ds_aprv_out");this.m2n_lookupPath("ds_aprv_in").clear();this.m2n_lookupPath("ds_aprv_in").addColumn("aprvTypId","String");this.m2n_lookupPath("ds_aprv_in").addColumn("ctxtCtt","String ");this.m2n_lookupPath("ds_aprv_in").addColumn("titleCtt","String");this.m2n_lookupPath("ds_aprv_in").addColumn("aprvOpRsltCd","String");this.m2n_lookupPath("ds_aprv_in").addColumn("aprvReqEffEndDt","String");this.m2n_lookupPath("ds_aprv_in").addColumn("batOpPsblYn","String");this.m2n_lookupPath("ds_aprv_in").addColumn("actStCd","String");this.m2n_lookupPath("ds_aprv_in").addColumn("aprvReqParmCtt1","String");this.m2n_lookupPath("ds_aprv_in").addColumn("aprvReqParmCtt2","String");this.m2n_lookupPath("ds_aprv_in").addColumn("aprvReqParmCtt3","String");this.m2n_lookupPath("ds_aprv_in").addColumn("aprvReqParmCtt4","String");this.m2n_lookupPath("ds_aprv_in").addColumn("aprvReqParmCtt5","String");this.m2n_lookupPath("ds_aprv_in").addRow();this.m2n_lookupPath("ds_aprv_in").setColumn(0,"aprvTypId",_c);this.m2n_lookupPath("ds_aprv_in").setColumn(0,"ctxtCtt",_e);this.m2n_lookupPath("ds_aprv_in").setColumn(0,"titleCtt",_d);this.m2n_lookupPath("ds_aprv_in").setColumn(0,"aprvOpRsltCd","04PAING");this.m2n_lookupPath("ds_aprv_in").setColumn(0,"batOpPsblYn","0");this.m2n_lookupPath("ds_aprv_in").setColumn(0,"actStCd","1");this.m2n_lookupPath("ds_aprv_in").addColumn("seq","String");this.m2n_lookupPath("ds_aprv_in").setColumn(0,"seq",_i);for(i=0;i<this.m2n_length(_f)||i<5;i++ ){this.m2n_lookupPath("ds_aprv_in").setColumn(0,"aprvReqParmCtt"+(i+1),_f[i]);}this.m2n_lookupPath("ds_sub_in").clear();this.m2n_lookupPath("ds_sub_in").addColumn("aprvTypId","String");this.m2n_lookupPath("ds_sub_in").addColumn("serNum","integer");this.m2n_lookupPath("ds_sub_in").addColumn("varCtt","String");for(i=0;i<this.m2n_length(_g)&&i<9;i++ ){this.m2n_lookupPath("ds_sub_in").addRow();this.m2n_lookupPath("ds_sub_in").setColumn(this.m2n_lookupPath("ds_sub_in").row,"aprvTypId",_c);this.m2n_lookupPath("ds_sub_in").setColumn(this.m2n_lookupPath("ds_sub_in").row,"serNum",i+1);this.m2n_lookupPath("ds_sub_in").setColumn(this.m2n_lookupPath("ds_sub_in").row,"varCtt",_g[i]);}this.m2n_lookupPath("ds_aprvr").clear();this.m2n_lookupPath("ds_aprvr").addColumn("serNum","integer");this.m2n_lookupPath("ds_aprvr").addColumn("aprvReqId","String");this.m2n_lookupPath("ds_aprvr").addColumn("aprvrId","String");this.m2n_lookupPath("ds_aprvr").addColumn("aprvrPostOrgId","String");this.m2n_lookupPath("ds_aprvr").addColumn("aprvOpRsltCd","String");this.m2n_lookupPath("ds_aprvr").addRow();this.m2n_lookupPath("ds_aprvr").setColumn(0,"serNum",0);this.m2n_lookupPath("ds_aprvr").setColumn(0,"aprvOpRsltCd","04PAING");trace("ds_aprvr : "+this.m2n_lookupPath("ds_aprvr"));var _k="";var _l=true;var _m="";_k=this.ff_manlAsgnPreYN(_i);if(_k==false){_l=false;}if(_k=="Y"){_m=this.ff_manlAsgnSave(_i);if(_m==0){_l=false;}else{this.m2n_copy(_h,this.m2n_lookupPath("ds_aprv_out"));}}if(_k=="N"){_l=this._cdmf_requestTransaction();_h.clear();if(_l&&(!this.utlf_isNull(_h)&&this.m2n_getType(_h)=='Dataset')){this.m2n_copy(_h,this.m2n_lookupPath("ds_aprv_out"));}if(_h.getRowCount()==0){_l=false;}}_j=this.m2n_lookupPath("ds_aprv_typ").getColumn(0,"aprvReqPviewYn");if(_j){if(this.m2n_lookupPath("sysf_openDialog")("CM_CTM","CTM60U0201P","",-1,-1,"")){_l=this._cdmf_requestTransactionAfterPreview();}else{_l=false;}}this.m2n_destroy(this.m2n_lookupPath("ds_aprv_in"));this.m2n_destroy(this.m2n_lookupPath("ds_sub_in"));this.m2n_destroy(this.m2n_lookupPath("ds_aprvr"));this.m2n_destroy(this.m2n_lookupPath("ds_aprv_typ"));this.m2n_destroy(this.m2n_lookupPath("ds_aprv_out"));return _l;};this.ff_manlAsgnPreYN=function(_c){this.m2n_create(this,"Dataset","ds_return");this.m2n_lookupPath("ds_return").clear();this.m2n_lookupPath("ds_return").addColumn("asgnYN","String");var _d="CMCTMO00#manlAsgn_PSCMAprv";var _e="";var _f="";var _g="inaprvSelect=ds_aprv_in";var _h="ds_return=outDto";this.sysf_ncCallSyncTR(_e,_d,_f,"",_g,_h);var _i=this.m2n_lookupPath("ds_return").getColumn(0,"asgnYN");if(_i=="Y"){if(this.m2n_asc(_c)<48||this.m2n_asc(_c)>57){return false;}}this.m2n_destroy("ds_return");return _i;};this.ff_manlAsgnSave=function(_c){var _d="";var _e="";var _f="";var _g="";this.m2n_create(this,"Dataset","ds_save");if(nexacro.toNumber(_c)==0){var _h=new Array(-1);this.m2n_lookupPath("ds_save").clear();this.m2n_lookupPath("ds_save").addColumn("userId","String");this.m2n_lookupPath("ds_save").addColumn("orgId","String");this.m2n_lookupPath("ds_save").addColumn("ll_phonNum","String");_h[0]=this.m2n_lookupPath("ds_aprv_in");_h[1]=this.m2n_lookupPath("ds_sub_in");_h[2]=this.m2n_lookupPath("ds_aprvr");_g=this.m2n_lookupPath("sysf_openDialog")("CM_RSM","RSM90U0010P",_h,-1,-1);if(_g==false){return false;}_d=this.m2n_split(_g[0],",");_e=this.m2n_split(_g[1],",");_f=this.m2n_split(_g[2],",");for(var _o=0;_o<this.m2n_length(_d);_o++ ){var _i=this.m2n_lookupPath("ds_save").addRow();this.m2n_lookupPath("ds_save").setColumn(_i,"userId",_d[_o]);this.m2n_lookupPath("ds_save").setColumn(_i,"orgId",_e[_o]);this.m2n_lookupPath("ds_save").setColumn(_i,"phoneNum",this.m2n_lookupPath("ll_phoneNum")[_o]);}this.m2n_lookupPath("ds_aprv_out").clear();this.m2n_lookupPath("ds_aprv_out").addColumn("aprvReqId","String");this.m2n_lookupPath("ds_aprv_out").addRow();this.m2n_lookupPath("ds_aprv_out").setColumn(0,"aprvReqId",_g[3]);}if(nexacro.toNumber(_c)>0){this.m2n_create(this,"Dataset","ds_aprv");this.m2n_lookupPath("ds_aprv").clear();this.m2n_lookupPath("ds_aprv").addColumn("aprvReqId","String");var _j="";var _k="";var _l="cm.rsm.CMRSMO00#psCMRSM90U0010P_I001";var _m="userDto=ds_save";_m+=" inDto=ds_aprv_in";_m+=" aprvDto=ds_sub_in";_m+=" subDto=ds_aprvr";var _n="ds_aprv=aprvReqIdDto";this.sysf_ncCallSyncTR(_k,_l,_j,"",_m,_n);this.m2n_lookupPath("ds_aprv_out").clear();this.m2n_lookupPath("ds_aprv_out").addColumn("aprvReqId","String");this.m2n_lookupPath("ds_aprv_out").addRow();this.m2n_lookupPath("ds_aprv_out").setColumn(0,"aprvReqId",this.m2n_lookupPath("ds_aprv").getColumn(0,"aprvReqId"));this.m2n_destroy("ds_aprv");}return true;};this._cdmf_requestTransaction=function(){var _c="";var _d="";var _e="";var _f=new Array(1);var _g;_g=new Array(4);_g[0]="CMCTMO00#request_PSCMAprv";_c="request";_d="CMAprvReqDto/aprvReqLstDto/subDto=ds_aprv_in";_d+=" CMAprvReqDto/aprvReqParmDto/subDto=ds_sub_in";_d+=" CMAprvReqDto/aprvrLstDto/subDto=ds_aprvr";_d+=" CMAprvReqDto/aprvTypLstDto/subDto=ds_aprv_typ";_e="ds_aprv_out=CMAprvReqDto/aprvReqLstDto/subDto";_e+=" ds_aprv_typ=CMAprvReqDto/aprvTypLstDto/subDto";this.m2n_lookupPath("ds_aprv_out").clearData();_f[0]="CMAprvReqDto/aprvReqLstDto,1,0,0";this.sysf_callSyncTR(_c,_g,this.m2n_lookupPath("fv_strScreenName"),"",_d,_e,_f);return (this.m2n_lookupPath("ds_aprv_out").getRowCount()!=0);};this._cdmf_requestTransactionAfterPreview=function(){var _c="";var _d="";var _e="";var _f=new Array(1);var _g;_g=new Array(4);_g[0]="CMCTMO00#requestApproval_PSCMAprv";_c="request";_d="CMAprvReqDto/aprvReqLstDto/subDto=ds_aprv_out";_d+=" CMAprvReqDto/aprvReqParmDto/subDto=ds_sub_in";_d+=" CMAprvReqDto/aprvrLstDto/subDto=ds_aprvr";_d+=" CMAprvReqDto/aprvTypLstDto/subDto=ds_aprv_typ";_e="ds_aprv_out=CMAprvReqDto/aprvReqLstDto/subDto";_e+=" ds_sub_in=CMAprvReqDto/aprvReqParmDto/subDto";_e+=" ds_aprvr=CMAprvReqDto/aprvrLstDto/subDto";_e+=" ds_aprv_typ=CMAprvReqDto/aprvTypLstDto/subDto";_f[0]="CMAprvReqDto/aprvReqLstDto,"+this.m2n_lookupPath("ds_aprv_in").getRowCount()+",0,0";_f[1]="CMAprvReqDto/aprvReqParmDto,"+this.m2n_lookupPath("ds_sub_in").getRowCount()+",0,0";_f[2]="CMAprvReqDto/aprvrLstDto,"+this.m2n_lookupPath("ds_aprvr").getRowCount()+",0,0";_f[3]="CMAprvReqDto/aprvReqLstDto,"+this.m2n_lookupPath("ds_aprv_typ").getRowCount()+",0,0";this.m2n_lookupPath("ds_aprv_out").clearData();this.sysf_callSyncTR(_c,_g,this.m2n_lookupPath("fv_strScreenName"),"",_d,_e,_f);return (this.m2n_lookupPath("ds_aprv_out").getRowCount()!=0);};this.cdmf_getRequestStatus=function(_c,_d){var _e="";var _f="";var _g="";var _h=new Array(1);var _i;_i=new Array(4);_i[0]="CMCTMO00#getStatus_PSCMAprv";_e="getStatus";_f="CMCtmAprvReqLstListDto/subDto=GDS_DUMMY_IN";_g=_d.id+"=CMCtmAprvReqLstListDto/subDto";_h[0]="CMCtmAprvReqLstListDto,1,0,0";nexacro.getApplication().GDS_DUMMY_IN.clear();nexacro.getApplication().GDS_DUMMY_IN.addColumn("aprvReqId","String");nexacro.getApplication().GDS_DUMMY_IN.addColumn("aprvReqParmCtt1","String");nexacro.getApplication().GDS_DUMMY_IN.addColumn("aprvReqParmCtt2","String");nexacro.getApplication().GDS_DUMMY_IN.addColumn("aprvReqParmCtt3","String");nexacro.getApplication().GDS_DUMMY_IN.addColumn("aprvReqParmCtt4","String");nexacro.getApplication().GDS_DUMMY_IN.addColumn("aprvReqParmCtt5","String");nexacro.getApplication().GDS_DUMMY_IN.addRow();if(type(_c)=="STRING"){nexacro.getApplication().GDS_DUMMY_IN.setColumn(0,"aprvReqId",_c);}else if(type(_c)=="ARRAY"){for(i=0;i<this.m2n_length(_c)||i<5;i++ ){nexacro.getApplication().GDS_DUMMY_IN.setColumn(0,"aprvReqParmCtt"+(i+1),_c[i]);}}this.sysf_callSyncTR(_e,_i,this.m2n_lookupPath("fv_strScreenName"),"",_f,_g,_h);if((nexacro.getApplication().GDS_NCHEAD_OUT.getRowCount()!=0)||_d.getRowCount()<=0){return false;}return true;};this.ctmf_approve=function(_c,_d,_e,_f){if(this.m2n_length(this.m2n_trim(_c))==0){this.alert("승인유형ID가 없습니다.");return false;}if(type(_d)=="STRING"){if(this.m2n_length(this.m2n_trim(_d))==0){this.alert("승인요청ID가 없습니다.");return false;}}else if(type(_d)=="ARRAY"){}else{this.alert("적절하지않은 승인요청ID변수입니다.");return false;}if(this.m2n_length(this.m2n_trim(_e))==0){this.alert("승인유형코드가 없습니다.");return false;}nexacro.getApplication().GDS_PROHEAD_IN.clear();nexacro.getApplication().GDS_PROHEAD_IN.addColumn("aprvTypId");nexacro.getApplication().GDS_PROHEAD_IN.addColumn("aprvReqId");nexacro.getApplication().GDS_PROHEAD_IN.addColumn("aprvOpRsltCd");nexacro.getApplication().GDS_PROHEAD_IN.addColumn("currAprvStep","int");nexacro.getApplication().GDS_PROHEAD_IN.addColumn("aprvReqParmCtt1","String");nexacro.getApplication().GDS_PROHEAD_IN.addColumn("aprvReqParmCtt2","String");nexacro.getApplication().GDS_PROHEAD_IN.addColumn("aprvReqParmCtt3","String");nexacro.getApplication().GDS_PROHEAD_IN.addColumn("aprvReqParmCtt4","String");nexacro.getApplication().GDS_PROHEAD_IN.addColumn("aprvReqParmCtt5","String");nexacro.getApplication().GDS_PROHEAD_IN.addRow();nexacro.getApplication().GDS_PROHEAD_IN.setColumn(0,"aprvTypId",_c);nexacro.getApplication().GDS_PROHEAD_IN.setColumn(0,"aprvOpRsltCd",_e);nexacro.getApplication().GDS_PROHEAD_IN.setColumn(0,"currAprvStep",-1);if(type(_d)=="STRING"){nexacro.getApplication().GDS_PROHEAD_IN.setColumn(0,"aprvReqId",_d);}else if(type(_d)=="ARRAY"){for(i=0;i<this.m2n_length(_d)||i<5;i++ ){nexacro.getApplication().GDS_PROHEAD_IN.setColumn(0,"aprvReqParmCtt"+(i+1),_d[i]);}}var _g="";var _h="";var _i="";var _j=new Array(1);var _k;var _l;_k=new Array(4);_k[0]="CMCTMO00#operation_PSCMAprv";_g="operation";_h="CMCtmAprvReqLstListDto/subDto=GDS_PROHEAD_IN";_i="GDS_PROHEAD_OUT=CMCtmAprvReqLstListDto/subDto";_j[0]="CMCtmAprvReqLstListDto,1,0,0";this.sysf_callSyncTR(_g,_k,this.m2n_lookupPath("fv_strScreenName"),"",_h,_i,_j,_l);var _m=true;if(this.m2n_lookupPath("GDS_PROHEAD_OUT").getColumn(0,"pfmMsgReturnType")==-1){_m=false;}if(_m&&!this.utlf_isNull(_f)&&this.m2n_getType(_f)=='Dataset'){_f.clear();this.m2n_copy(_f,this.m2n_lookupPath("GDS_PROHEAD_OUT"));}nexacro.getApplication().GDS_PROHEAD_IN.clear();this.m2n_lookupPath("GDS_PROHEAD_OUT").clear();return _m;};this.ff_usrForAprvrLov=function(_c){var _d=new Array(-1);var _e=new Array(-1);var _f=new Array(-1);var _g=new Array(-1);var _h=new Array(-1);this.m2n_lookupPath("strPopupTitle")="USER,LOGIN_ID";this.m2n_lookupPath("strPageNo")="0";this.m2n_lookupPath("strPageCount")="0";_d[0]="CMCTMO00#searchUserLov_PSCMAprv";if(this.m2n_length(this.m2n_trim(_c))>0){_e[0]=_c;}_f[0]="iparam1";_g[0]="USER_ID,USER_FULL_NM,LOGIN_ID,ORG_ID,ORG_NM";_g[1]="1,2,3,4,5";_g[2]="0,100,200,0,135";_g[3]="center,left,left,left,left";_g[4]="N";var _i=this.sysf_showBaseLoV(this.m2n_lookupPath("fv_strScreenName"),_d,_e,_f,_g,this.m2n_lookupPath("strPopupTitle"),this.m2n_lookupPath("strPageNo"),this.m2n_lookupPath("strPageCount"));return _i;};});this.loadIncludeScript(_a);_b=null;};})();