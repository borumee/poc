(function(){return function(){if(!this._is_form){return;}var _a=null;this.on_create=function(){this.set_name("frmLogin");this.set_titletext("LoginFrame");this.set_cssclass("frm_LOGIN_Bg");if(Form==this.constructor){this._setFormPosition(1280,720);}_a=new Dataset("dsCond",this);_a._setContents("<ColumnInfo><Column id=\"EMP_NO\" type=\"STRING\" size=\"256\"/><Column id=\"USER_PASSWORD\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row><Col id=\"USER_PASSWORD\"/><Col id=\"EMP_NO\"/></Row></Rows>");this.addChild(_a.name,_a);_a=new Dataset("dsLoginResult",this);_a._setContents("");this.addChild(_a.name,_a);_a=new Dataset("dsFcmIn",this);_a._setContents("<ColumnInfo><Column id=\"TOKEN\" type=\"STRING\" size=\"256\"/><Column id=\"MSG\" type=\"STRING\" size=\"256\"/></ColumnInfo><Rows><Row/></Rows>");this.addChild(_a.name,_a);_a=new Dataset("dsFcmInOut",this);_a._setContents("");this.addChild(_a.name,_a);_a=new Div("divLogin","430","95","400","460",null,null,null,null,null,null,this);_a.set_taborder("0");_a.set_text("");_a.set_background("");_a.set_cssclass("div_LOGIN_Bg");_a.set_formscrollbartype("none none");this.addChild(_a.name,_a);_a=new Static("staUserId","30","160",null,"50","30",null,null,null,null,null,this.divLogin.form);_a.set_taborder("4");_a.set_cssclass("sta_LOGIN_Id");this.divLogin.addChild(_a.name,_a);_a=new Static("staPassword","30","230","340","50",null,null,null,null,null,null,this.divLogin.form);_a.set_taborder("3");_a.set_cssclass("sta_LOGIN_Pw");this.divLogin.addChild(_a.name,_a);_a=new Button("btnLogin","0",null,null,"70","0","0",null,null,null,null,this.divLogin.form);_a.set_taborder("2");_a.set_text("시작하기");_a.set_cssclass("btn_LOGIN_Start");this.divLogin.addChild(_a.name,_a);_a=new Edit("edtUserId","153","170","210","30",null,null,null,null,null,null,this.divLogin.form);_a.set_taborder("0");_a.set_value("999999");_a.set_cssclass("edt_LOGIN_Input");_a.set_text("999999");this.divLogin.addChild(_a.name,_a);_a=new Edit("edtPassword","153","240","210","30",null,null,null,null,null,null,this.divLogin.form);_a.set_taborder("1");_a.set_value("1111");_a.set_password("true");_a.set_cssclass("edt_LOGIN_Input");_a.set_text("1111");this.divLogin.addChild(_a.name,_a);_a=new Static("Static00","74","28","273","98",null,null,null,null,null,null,this.divLogin.form);_a.set_taborder("5");_a.set_cssclass("sta_LOGIN_Logo");this.divLogin.addChild(_a.name,_a);_a=new CheckBox("chkSaveId","33",null,"84","30",null,"104",null,null,null,null,this.divLogin.form);_a.set_taborder("6");_a.set_text("아이디저장");_a.set_cssclass("chk_LOGIN_Id");_a.set_falsevalue("false");_a.set_truevalue("true");this.divLogin.addChild(_a.name,_a);_a=new Button("btn00","20","18","115","42",null,null,null,null,null,null,this);_a.set_taborder("1");_a.set_text("FCM");_a.set_visible("false");this.addChild(_a.name,_a);_a=new Button("btn01","150","18","115","42",null,null,null,null,null,null,this);_a.set_taborder("2");_a.set_text("APNS");_a.set_visible("false");this.addChild(_a.name,_a);_a=new Layout("default","",0,0,this.divLogin.form,function(_b){});this.divLogin.form.addLayout(_a.name,_a);_a=new Layout("default","",1280,720,this,function(_b){});this.addLayout(_a.name,_a);_a=new BindItem("item0","divLogin.form.edtUserId","value","dsCond","EMP_NO");this.addChild(_a.name,_a);_a.bind();_a=new BindItem("item1","divLogin.form.edtPassword","value","dsCond","USER_PASSWORD");this.addChild(_a.name,_a);_a.bind();};this.loadPreloadList=function(){};this.registerScript("frmLogin.xfdl",function(){this.objApp=nexacro.getApplication();this.form_onload=function(_a,_b){this.fnDivLoginResize();this.fnGetPassword();};this.frmLogin_onsize=function(_a,_b){this.fnDivLoginResize();};this.fnGetBaseInfo=function(){var _b="SearchBaseInfo";var _c="SearchBaseInfo.do";var _d="";var _e="gdsCommCode=dsComboData gdsMessage=dsMessage gdsMyMenu=dsMyMenu gdsMenu=dsMenu gdsAddBtn=dsAddBtn";var _f="";var _g="fnCallback";this.gfnTransaction(_b,_c,_d,_e,_f,_g);};this.fnLogin=function(){this.gfnClearValidation(this.dsCond);this.gfnSetValidation(this.dsCond,"EMP_NO","사용자ID","required");this.gfnSetValidation(this.dsCond,"USER_PASSWORD","패스워드","required");if(this.gfnValidation(this.dsCond,"U")==false){return;}this.gfnSetLoginLogDataset();this.fnGoMain();};this.fnCallback=function(_b,_c,_d){switch(_b){case "SearchBaseInfo":this.fnGoMain();break;case "Login":this.fnSetLoginResult(_c,_d);break;case "fcmProvider":var _a=JSON.parse(this.dsFcmInOut.getColumn(0,"RESULTS"));trace(_a.success);trace(_a.results[0].message_id);break;case "apnsProvider":if(this.dsFcmInOut.getColumn("STATUSCODE")!=200){trace(this.dsFcmInOut.saveXML());var _e=this.dsFcmInOut.getColumn(0,"RESPONSEBODY");trace(JSON.parse(_e).reason);}break;}};this.fnSetLoginResult=function(_b,_c){if(_b==-200){this.gfnAlert("msg.err.tran",[_c]);return;}else if(_b==0){var _d=this.objApp.gdsUser.getColumn(0,"THEME_ID");if(!this.gfnIsNull(_d)){if(_d=="02"){nexacro.loadStyle("xcssrc::darkMode.xcss");}else{nexacro.loadStyle("xcssrc::lightMode.xcss");}}this.fnSavePassword();this.fnGetBaseInfo();}};this.fnDivLoginResize=function(){var _b=(nexacro.getApplication().mainframe.width/2)-Math.round((this.divLogin.getOffsetWidth())/2);var _c=(nexacro.getApplication().mainframe.height/2)-Math.round((this.divLogin.getOffsetHeight())/2);if(_b<=0){this.divLogin.setOffsetLeft(0);}else{this.divLogin.setOffsetLeft(_b);this.divLogin.setOffsetTop(_c);}};this.fnGoMain=function(){this.gfnSetLogin();};this.fnGetPassword=function(){var _b=nexacro.getPrivateProfile("idSaveCheck");this.divLogin.form.chkSaveId.set_value(_b);if(_b=="true"){this.divLogin.form.edtUserId.set_value(nexacro.getPrivateProfile("idSave"));this.divLogin.form.edtPassword.setFocus();}else{this.divLogin.form.edtUserId.set_value("");this.divLogin.form.edtUserId.setFocus();}};this.fnSavePassword=function(){nexacro.setPrivateProfile("idSaveCheck",this.divLogin.form.chkSaveId.value);if(this.divLogin.form.chkSaveId.value=="true"){nexacro.setPrivateProfile("idSave",this.divLogin.form.edtUserId.value);}};this.divLogin_btnLogin_onclick=function(_a,_b){this.fnLogin();};this.edt_keyup=function(_a,_b){if(_b.keycode==13){this.fnLogin();}};this.btn00_onclick=function(_a,_b){var _c="fcmProvider";var _d="fcmProvider.do";var _e="inDs=dsFcmIn";var _f="dsFcmInOut=outDs";var _g="";var _h="fnCallback";this.gfnTransaction(_c,_d,_e,_f,_g,_h);};this.btn01_onclick=function(_a,_b){var _c="apnsProvider";var _d="apnsProvider.do";var _e="inDs=dsFcmIn";var _f="dsFcmInOut=outDs";var _g="";var _h="fnCallback";this.gfnTransaction(_c,_d,_e,_f,_g,_h);};});this.on_initEvent=function(){this.addEventHandler("onsize",this.frmLogin_onsize,this);this.addEventHandler("onload",this.form_onload,this);this.divLogin.form.btnLogin.addEventHandler("onclick",this.divLogin_btnLogin_onclick,this);this.divLogin.form.edtUserId.addEventHandler("onkeyup",this.edt_keyup,this);this.divLogin.form.edtPassword.addEventHandler("onkeyup",this.edt_keyup,this);this.btn00.addEventHandler("onclick",this.btn00_onclick,this);this.btn01.addEventHandler("onclick",this.btn01_onclick,this);};this.loadIncludeScript("frmLogin.xfdl");this.loadPreloadList();_a=null;};})();