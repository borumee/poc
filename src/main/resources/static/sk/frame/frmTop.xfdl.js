(function(){return function(){if(!this._is_form){return;}var _a=null;this.on_create=function(){this.set_name("frmTop");this.set_titletext("TopFrame");if(Form==this.constructor){this._setFormPosition(1280,50);}_a=new Dataset("dsMenu",this);_a._setContents("<ColumnInfo><Column id=\"MENU_ID\" type=\"STRING\" size=\"256\"/><Column id=\"MENU_NM\" type=\"STRING\" size=\"256\"/><Column id=\"MENU_LV\" type=\"STRING\" size=\"256\"/><Column id=\"HIPO_MENU_ID\" type=\"STRING\" size=\"256\"/><Column id=\"MENU_URL\" type=\"STRING\" size=\"256\"/><Column id=\"MODULE_CD\" type=\"STRING\" size=\"256\"/></ColumnInfo>");this.addChild(_a.name,_a);_a=new Static("Static00","0","0",null,null,"0","0",null,null,null,null,this);_a.set_taborder("0");_a.set_cssclass("sta_TF_Bg");_a.set_text("");this.addChild(_a.name,_a);_a=new Static("staLogo","0","0","210",null,null,"0",null,null,null,null,this);_a.set_taborder("1");_a.set_text("투비소프트");_a.set_cssclass("sta_TF_Logo");_a.set_cursor("pointer");this.addChild(_a.name,_a);_a=new Button("btnPre","staLogo:24","10","20","30",null,null,null,null,null,null,this);_a.set_taborder("2");_a.set_tooltiptext("이전 화면목록으로");_a.set_cssclass("btn_TF_Prev");_a.set_visible("false");this.addChild(_a.name,_a);_a=new Button("btnNext",null,"10","20","30","248",null,null,null,null,null,this);_a.set_taborder("3");_a.set_tooltiptext("다음 화면목록으로");_a.set_cssclass("btn_TF_Next");_a.set_visible("false");this.addChild(_a.name,_a);_a=new Button("btnUserSetting",null,"0","39",null,"49","0",null,null,null,null,this);_a.set_taborder("4");_a.set_cssclass("btn_TF_User");_a.set_text("");this.addChild(_a.name,_a);_a=new Button("btnLogout",null,"0","39",null,"10","0",null,null,null,null,this);_a.set_taborder("5");_a.set_cssclass("btn_TF_Logout");_a.set_text("");this.addChild(_a.name,_a);_a=new Div("divTopBtn","btnPre:5","0",null,"50","btnNext:5",null,null,null,null,null,this);_a.set_taborder("6");this.addChild(_a.name,_a);_a=new Static("staUserInfo",null,"12","142","22","89",null,null,null,null,null,this);_a.set_taborder("7");_a.set_text("컨설팅팀 홍길동님");_a.set_cssclass("sta_TF_User");this.addChild(_a.name,_a);_a=new Layout("default","",0,0,this.divTopBtn.form,function(_b){var _c=_b;_b=_c;});this.divTopBtn.form.addLayout(_a.name,_a);_a=new Layout("Layout0","",0,0,this.divTopBtn.form,function(_b){var _c=_b;_b=_c;});this.divTopBtn.form.addLayout(_a.name,_a);_a=new Layout("default","",1280,50,this,function(_b){var _c=_b;_b=_c;_b.set_titletext("TopFrame");_b.Static00.set_taborder("0");_b.Static00.set_cssclass("sta_TF_Bg");_b.Static00.set_text("");_b.Static00.move("0","0",null,null,"0","0");_b.staLogo.set_taborder("1");_b.staLogo.set_text("투비소프트");_b.staLogo.set_cssclass("sta_TF_Logo");_b.staLogo.set_cursor("pointer");_b.staLogo.move("0","0","210",null,null,"0");_b.btnPre.set_taborder("2");_b.btnPre.set_tooltiptext("이전 화면목록으로");_b.btnPre.set_cssclass("btn_TF_Prev");_b.btnPre.set_visible("false");_b.btnPre.move("staLogo:24","10","20","30",null,null);_b.btnNext.set_taborder("3");_b.btnNext.set_tooltiptext("다음 화면목록으로");_b.btnNext.set_cssclass("btn_TF_Next");_b.btnNext.set_visible("false");_b.btnNext.move(null,"10","20","30","248",null);_b.btnUserSetting.set_taborder("4");_b.btnUserSetting.set_cssclass("btn_TF_User");_b.btnUserSetting.set_text("");_b.btnUserSetting.move(null,"0","39",null,"49","0");_b.btnLogout.set_taborder("5");_b.btnLogout.set_cssclass("btn_TF_Logout");_b.btnLogout.set_text("");_b.btnLogout.move(null,"0","39",null,"10","0");_b.divTopBtn.set_taborder("6");_b.divTopBtn.move("btnPre:5","0",null,"50","btnNext:5",null);_b.staUserInfo.set_taborder("7");_b.staUserInfo.set_text("컨설팅팀 홍길동님");_b.staUserInfo.set_cssclass("sta_TF_User");_b.staUserInfo.move(null,"12","142","22","89",null);});this.addLayout(_a.name,_a);_a=new Layout("Layout0","",500,50,this,function(_b){var _c=_b;_b=_c;_b.staUserInfo.set_visible("false");_b.staUserInfo.move(null,"102","142","22","89",null);_b.btnUserSetting.set_visible("false");_b.btnUserSetting.move(null,"88","39",null,"49","-88");_b.staLogo.set_visible("false");_b.staLogo.move("0","124","210",null,null,"-124");_b.btnPre.move("14","10","20","30",null,null);_b.divTopBtn.move("34","0",null,"50","btnNext:5",null);_b.btnNext.move(null,"10","20","30","58",null);});_a.set_mobileorientation("landscape");this.addLayout(_a.name,_a);};this.loadPreloadList=function(){};this.registerScript("frmTop.xfdl",function(){this.fvFirstGap=0;this.fvBtnGap=0;this.fvBtnHeight=50;this.fvTopBtnPrefix="TOP_";this.objApp=nexacro.getApplication();this.form_onload=function(_a,_b){this.divTopBtn.form.set_scrollbartype("none");this.fnLoad();var _c=nexacro.getApplication().gdsUser.getColumn(0,"USER_NAME");var _d=nexacro.getApplication().gdsUser.getColumn(0,"DEPT_KORN_NM");var _e=_d+" "+_c+"님";this.staUserInfo.set_text(_e);};this.form_onsize=function(_a,_b){this.fnRedrawBtn();};this.fnLogoutLogTran=function(){var _b=nexacro.getApplication().gdsLog;_b.clearData();var _c=_b.addRow();_b.setColumn(_c,"LOG_TYPE","LOGOUT");var _d="saveLog";var _e="saveLog.do";var _f="dsList=gdsLog:U";var _g="";var _h="";var _i="fnCallback";this.gfnTransaction(_d,_e,_f,_g,_h,_i);};this.fnMsgCallback=function(_b,_c){switch(_b){case "logout":if(_c=="false"||_c==false||this.gfnIsNull(_c)){return;}this.fnLogoutLogTran();break;}};this.fnCallback=function(_b,_c,_d){switch(_b){case "saveLog":this.fnLogout();break;}};this.fnLogout=function(){if(system.navigatorname=="nexacro"){nexacro.getApplication().exit();}else{window.top.location.reload(true);}};this.fnLoad=function(){var _b=this.FRAME_MENUCOLUMNS.menuLevel+" == '0' ";this.objApp.gdsMenu.filter(_b);this.dsMenu.copyData(this.objApp.gdsMenu,true);this.objApp.gdsMenu.filter("");this.fnSetTopMenu();};this.fnSetTopMenu=function(){for(var _d=0;_d<this.dsMenu.getRowCount();_d++ ){var _b=this.dsMenu.getColumn(_d,this.FRAME_MENUCOLUMNS.menuId);var _c=this.dsMenu.getColumn(_d,this.FRAME_MENUCOLUMNS.menuNm);this.fnCreateTopMenu(_b,_c,_d);}this.fnRedrawBtn();};this.fnCreateTopMenu=function(_b,_c,_d){var _e=new Button();_e.init(this.fvTopBtnPrefix+_b,this.fnGetLeft(_b),0,130,this.fvBtnHeight,null,null);this.divTopBtn.form.addChild(_e.name,_e);_e.set_text(_c);_e.set_cssclass("btn_TF_Menu");_e.menuid=_b;_e.show();_e.set_fittocontents("width");var _f=_e.getOffsetWidth();_e.set_fittocontents("none");_e.set_width(_f+20);_e.setEventHandler("onclick",this.btnTopMenu_onclick,this);};this.fnGetLeft=function(_b){var _c=this.dsMenu.findRow(this.FRAME_MENUCOLUMNS.menuId,_b);if(_c==0){return this.fvFirstGap;}var _d=this.fnFindObj(this.fvTopBtnPrefix+this.dsMenu.getColumn(_c-1,this.FRAME_MENUCOLUMNS.menuId));return _d.getOffsetRight()+this.fvBtnGap;};this.fnMenuClick=function(_b){this.objApp.gvFrmLeft.form.divLnb.form.grdMenu.set_enableevent(false);this.objApp.gvFrmLeft.form.divLnb.form.grdMenu.set_enableredraw(false);this.objApp.gvFrmLeft.form.dsMenu.set_enableevent(false);this.objApp.gvFrmLeft.form.divLnb.form.grdMenu.set_binddataset("");this.objApp.gvFrmLeft.form.divLnb.form.grdMenu.set_treeinitstatus("expand,all");this.objApp.gvFrmLeft.form.dsMenu.clearData();var _c=this.dsMenu.lookup("MENU_ID",_b,"MODULE_CD");var _d=this.FRAME_MENUCOLUMNS.menuLevel+" != '0' && "+this.FRAME_MENUCOLUMNS.groupId+" == '"+_c+"' ";this.objApp.gdsMenu.filter(_d);this.objApp.gvFrmLeft.form.dsMenu.copyData(this.objApp.gdsMenu,true);this.objApp.gdsMenu.filter("");if(this.objApp.gvFrmLeft.form.fnGetMenuOpenClose()!="open"){this.objApp.gvFrmLeft.form.fnSetMenuOpenClose("open");}this.objApp.gvFrmLeft.form.divLnb.form.grdMenu.set_binddataset("dsMenu");this.objApp.gvFrmLeft.form.divLnb.form.grdMenu.set_enableevent(true);this.objApp.gvFrmLeft.form.divLnb.form.grdMenu.set_enableredraw(true);this.objApp.gvFrmLeft.form.dsMenu.set_enableevent(true);this.objApp.gvFrmLeft.form.fnChangeLeftMenu(_b);if(this.objApp.gvFrmLeft.form.divLnb.form.grdMyMenu.visible==true){this.objApp.gvFrmLeft.form.fnSetMenuType("menu");}};this.fnRedrawBtn=function(){this.fnCheckShowBtnAll();this.fnSetSpinBtnShow();};this.fnCheckShowBtnAll=function(){if(this.dsMenu.rowcount==0){return;}var _b=this.fnFindObj(this.fvTopBtnPrefix+this.dsMenu.getColumn(0,this.FRAME_MENUCOLUMNS.menuId));var _c=this.fnFindObj(this.fvTopBtnPrefix+this.dsMenu.getColumn(this.dsMenu.rowcount-1,this.FRAME_MENUCOLUMNS.menuId));var _d=_b.getOffsetLeft();var _e=_c.getOffsetRight();if(this.divTopBtn.getOffsetWidth()>=(_e-_d)){this.fnMoveFirst(0);return;}};this.fnMoveFirst=function(_b){var _c;var _d;var _e;var _f;_c=this.fnGetFirstTopIndex();if(_c<0){return;}if(_b<0){return;}if(_b>=this.dsMenu.rowcount){return;}_d=this.dsMenu.getColumn(_c,this.FRAME_MENUCOLUMNS.menuId);_f=this.fnFindObj(this.fvTopBtnPrefix+_d);_d=this.dsMenu.getColumn(_b,this.FRAME_MENUCOLUMNS.menuId);_e=this.fnFindObj(this.fvTopBtnPrefix+_d);var _g=_e.getOffsetLeft()-_f.getOffsetLeft();for(var _h=0;_h<this.dsMenu.rowcount;_h++ ){_d=this.dsMenu.getColumn(_h,this.FRAME_MENUCOLUMNS.menuId);_e=this.fnFindObj(this.fvTopBtnPrefix+_d);_e.move(_e.getOffsetLeft()-_g,_e.getOffsetTop());}};this.fnGetFirstTopIndex=function(){for(var _d=0;_d<this.dsMenu.rowcount;_d++ ){var _b=this.dsMenu.getColumn(_d,this.FRAME_MENUCOLUMNS.menuId);var _c=this.fnFindObj(this.fvTopBtnPrefix+_b);if(this.gfnIsNull(_c)==false){if(0<=_c.getOffsetLeft()){return _d;}}}return -1;};this.fnSetSpinBtnShow=function(){var _b;if(this.dsMenu.rowcount==0){this.btnPre.set_visible(false);this.btnNext.set_visible(false);return;}_b=this.fnFindObj(this.fvTopBtnPrefix+this.dsMenu.getColumn(this.dsMenu.rowcount-1,this.FRAME_MENUCOLUMNS.menuId));if(this.divTopBtn.getOffsetWidth()<_b.getOffsetRight()){this.btnNext.set_visible(true);}else{this.btnNext.set_visible(false);}_b=this.fnFindObj(this.fvTopBtnPrefix+this.dsMenu.getColumn(0,this.FRAME_MENUCOLUMNS.menuId));if(_b.getOffsetLeft()<0){this.btnPre.set_visible(true);}else{this.btnPre.set_visible(false);}};this.fnFindObj=function(_b){return this.divTopBtn.form.components[_b];};this.fnSetActiveBtn=function(_b){var _c;for(var _d=0;_d<this.dsMenu.getRowCount();_d++ ){_c=this.fnFindObj(this.fvTopBtnPrefix+this.dsMenu.getColumn(_d,this.FRAME_MENUCOLUMNS.menuId));if(_b==this.dsMenu.getColumn(_d,this.FRAME_MENUCOLUMNS.menuId)){_c.set_cssclass("btn_TF_MenuS");}else{_c.set_cssclass("btn_TF_Menu");}}};this.staLogo_onclick=function(_a,_b){this.gfnSetMain();};this.btnTopMenu_onclick=function(_a,_b){var _c=_a.menuid;if(this.gfnIsNull(_c)){return;}this.fnSetActiveBtn(_c);this.fnMenuClick(_c);};this.btnPre_onclick=function(_a,_b){this.fnMoveFirst(this.fnGetFirstTopIndex()-1);this.fnRedrawBtn();};this.btnNext_onclick=function(_a,_b){this.fnMoveFirst(this.fnGetFirstTopIndex()+1);this.fnRedrawBtn();};this.btnLogout_onclick=function(_a,_b){this.fnLogout();};this.btnUserSetting_onclick=function(_a,_b){var _c="사용자 환경 설정 팝업";var _d={};var _e={title:_c,titlebar:true};var _f="fnUserSettingCallback";this.gfnOpenPopup("frmUserSetting","frame::frmUserSetting.xfdl",_d,_f,_e);};this.frmTop_onlayoutchanged=function(_a,_b){if(_b.newlayout=="default"){this.staLogo.set_visible(true);this.staUserInfo.set_visible(true);this.btnUserSetting.set_visible(true);}};});this.on_initEvent=function(){this.addEventHandler("onload",this.form_onload,this);this.addEventHandler("onsize",this.form_onsize,this);this.addEventHandler("onlayoutchanged",this.frmTop_onlayoutchanged,this);this.staLogo.addEventHandler("onclick",this.staLogo_onclick,this);this.btnPre.addEventHandler("onclick",this.btnPre_onclick,this);this.btnNext.addEventHandler("onclick",this.btnNext_onclick,this);this.btnUserSetting.addEventHandler("onclick",this.btnUserSetting_onclick,this);this.btnLogout.addEventHandler("onclick",this.btnLogout_onclick,this);this.divTopBtn.addEventHandler("onclick",this.div_Tab_onclick,this);};this.loadIncludeScript("frmTop.xfdl");this.loadPreloadList();_a=null;};})();